{% extends "base.html" %}
{% block content %}
<h2>Topics & Tasks</h2>
{% for topic in topics %}
  <h3>{{ topic.name }}</h3>
  <p>{{ topic.description }}</p>
  <ul>
  {% for task in topic.tasks %}
    <li>
      {{ task.task_name }} - Status: {{ task.status }}
      <form style="display:inline" action="{{ url_for('main.update_task', task_id=task.id) }}" method="POST">
        <select name="status" onchange="this.form.submit()">
          <option value="pending" {% if task.status=='pending' %}selected{% endif %}>Pending</option>
          <option value="in-progress" {% if task.status=='in-progress' %}selected{% endif %}>In-Progress</option>
          <option value="completed" {% if task.status=='completed' %}selected{% endif %}>Completed</option>
        </select>
      </form>
    </li>
  {% endfor %}
  </ul>
{% endfor %}
{% endblock %}
